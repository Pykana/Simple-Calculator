<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             x:Class="CalculadoraApp.MainPage">

    <ContentPage.Resources>
   
        <!--  Estilo base -->
        <Style x:Key="BaseCalculatorStyle" TargetType="Button">
            <Setter Property="WidthRequest" Value="80"/>
            <Setter Property="HeightRequest" Value="80"/>
            <Setter Property="CornerRadius" Value="40"/>
            <Setter Property="FontSize" Value="32"/>
            <Setter Property="FontAttributes" Value="Bold"/>
            <Setter Property="Margin" Value="5"/>
        </Style>

        <!--  Botones numéricos -->
        <Style x:Key="NumberButtonStyle"
               TargetType="Button"
               BasedOn="{StaticResource BaseCalculatorStyle}">
            <Setter Property="BackgroundColor" Value="{AppThemeBinding Light={StaticResource Gray200}, Dark={StaticResource Gray950}}"/>
            <Setter Property="TextColor" Value="{AppThemeBinding Light={StaticResource Black}, Dark={StaticResource White}}"/>
        </Style>

        <!--  Botones de operación -->
        <Style x:Key="OperatorButtonStyle"
               TargetType="Button"
               BasedOn="{StaticResource BaseCalculatorStyle}">
            <Setter Property="BackgroundColor" Value="{AppThemeBinding Light={StaticResource Primary}, Dark={StaticResource PrimaryDark}}"/>
            <Setter Property="TextColor" Value="{AppThemeBinding Light={StaticResource White}, Dark={StaticResource PrimaryDarkText}}"/>
        </Style>

    </ContentPage.Resources>

    <!-- Layout principal -->
    <Grid RowDefinitions="200,*"
          RowSpacing="10"
          ColumnSpacing="10">

        <!-- Pantalla de resultados -->
        <Border
            StrokeShape="RoundRectangle 0 0 25 25"
            BackgroundColor="{AppThemeBinding Light={StaticResource Primary}, Dark={StaticResource PrimaryDark}}"
            Padding="20">
            <VerticalStackLayout Spacing="5">
                <Entry 
                    x:Name="EntryOperacion"
                    HorizontalTextAlignment="End"
                    FontSize="36"
                    TextColor="{AppThemeBinding Light={StaticResource White}, Dark={StaticResource White}}"
                    BackgroundColor="Transparent"
                    IsReadOnly="True"/>
                <Label  
                    x:Name="LabelResultado"
                    HorizontalTextAlignment="End"
                    FontSize="50"
                    TextColor="{AppThemeBinding Light={StaticResource White}, Dark={StaticResource PrimaryDarkText}}"/>
            </VerticalStackLayout>
        </Border>
        
        <!-- Teclado -->
        <Grid Grid.Row="1"
              RowDefinitions="*,*,*,*,*"
              ColumnDefinitions="*,*,*,*"
              Padding="10"
              RowSpacing="10"
              ColumnSpacing="10">

            <Button Grid.Row="0" Grid.Column="0" Style="{StaticResource OperatorButtonStyle}" BackgroundColor="OrangeRed" Text="AC" Clicked="OnClearClicked"/>
            <Button Grid.Row="0" Grid.Column="1" Style="{StaticResource OperatorButtonStyle}" Text="( )" Clicked="OnButtonClicked"/>
            <Button Grid.Row="0" Grid.Column="2" Style="{StaticResource OperatorButtonStyle}" Text="%" Clicked="OnButtonClicked"/>
            <Button Grid.Row="0" Grid.Column="3" Style="{StaticResource OperatorButtonStyle}" Text="÷" Clicked="OnButtonClicked"/>

            <Button Grid.Row="1" Grid.Column="0" Style="{StaticResource NumberButtonStyle}" Text="1" Clicked="OnButtonClicked"/>
            <Button Grid.Row="1" Grid.Column="1" Style="{StaticResource NumberButtonStyle}" Text="2" Clicked="OnButtonClicked"/>
            <Button Grid.Row="1" Grid.Column="2" Style="{StaticResource NumberButtonStyle}" Text="3" Clicked="OnButtonClicked"/>
            <Button Grid.Row="1" Grid.Column="3" Style="{StaticResource OperatorButtonStyle}" Text="X" Clicked="OnButtonClicked"/>

            <Button Grid.Row="2" Grid.Column="0" Style="{StaticResource NumberButtonStyle}" Text="4" Clicked="OnButtonClicked"/>
            <Button Grid.Row="2" Grid.Column="1" Style="{StaticResource NumberButtonStyle}" Text="5" Clicked="OnButtonClicked"/>
            <Button Grid.Row="2" Grid.Column="2" Style="{StaticResource NumberButtonStyle}" Text="6" Clicked="OnButtonClicked"/>
            <Button Grid.Row="2" Grid.Column="3" Style="{StaticResource OperatorButtonStyle}" Text="-" Clicked="OnButtonClicked"/>

            <Button Grid.Row="3" Grid.Column="0" Style="{StaticResource NumberButtonStyle}" Text="7" Clicked="OnButtonClicked"/>
            <Button Grid.Row="3" Grid.Column="1" Style="{StaticResource NumberButtonStyle}" Text="8" Clicked="OnButtonClicked"/>
            <Button Grid.Row="3" Grid.Column="2" Style="{StaticResource NumberButtonStyle}" Text="9" Clicked="OnButtonClicked"/>
            <Button Grid.Row="3" Grid.Column="3" Style="{StaticResource OperatorButtonStyle}" Text="+" Clicked="OnButtonClicked"/>

            <Button Grid.Row="4" Grid.Column="0" Style="{StaticResource NumberButtonStyle}" Text="0" Clicked="OnButtonClicked"/>
            <Button Grid.Row="4" Grid.Column="1" Style="{StaticResource NumberButtonStyle}" Text="." Clicked="OnButtonClicked"/>
            <Button Grid.Row="4" Grid.Column="2" Style="{StaticResource NumberButtonStyle}" Text="⌫" Clicked="OnBackspaceClicked"/>
            <Button Grid.Row="4" Grid.Column="3" Style="{StaticResource OperatorButtonStyle}" Text="=" Clicked="OnEqualClicked"/>

        </Grid>
    </Grid>
</ContentPage>
